{"ast":null,"code":"import { ref, onMounted } from 'vue';\nimport { ElMessage } from 'element-plus';\nimport { useStore } from 'vuex';\nimport api from '@/api';\nimport dayjs from 'dayjs';\nexport default {\n  name: 'Inquiry',\n  setup() {\n    const store = useStore();\n    const formRef = ref();\n    const loading = ref(false);\n    const myInquiries = ref([]);\n    const form = ref({\n      email: '',\n      inquiryType: '',\n      title: '',\n      content: ''\n    });\n    const rules = {\n      email: [{\n        required: true,\n        message: '이메일을 입력해주세요',\n        trigger: 'blur'\n      }, {\n        type: 'email',\n        message: '올바른 이메일 형식을 입력해주세요',\n        trigger: 'blur'\n      }],\n      inquiryType: [{\n        required: true,\n        message: '문의 유형을 선택해주세요',\n        trigger: 'change'\n      }],\n      title: [{\n        required: true,\n        message: '제목을 입력해주세요',\n        trigger: 'blur'\n      }, {\n        min: 2,\n        max: 100,\n        message: '제목은 2-100자 사이로 입력해주세요',\n        trigger: 'blur'\n      }],\n      content: [{\n        required: true,\n        message: '문의 내용을 입력해주세요',\n        trigger: 'blur'\n      }, {\n        min: 10,\n        max: 2000,\n        message: '문의 내용은 10-2000자 사이로 입력해주세요',\n        trigger: 'blur'\n      }]\n    };\n    const loadMyInquiries = async () => {\n      try {\n        const response = await api.get('/inquiries/my');\n        myInquiries.value = response.data;\n      } catch (error) {\n        console.error('문의 내역 로드 실패:', error);\n      }\n    };\n    const submitInquiry = async () => {\n      if (!formRef.value) return;\n      try {\n        await formRef.value.validate();\n        loading.value = true;\n        await api.post('/inquiries', form.value);\n        ElMessage.success('문의가 성공적으로 등록되었습니다!');\n\n        // 폼 초기화\n        form.value = {\n          email: '',\n          inquiryType: '',\n          title: '',\n          content: ''\n        };\n        formRef.value.resetFields();\n\n        // 문의 내역 새로고침\n        await loadMyInquiries();\n      } catch (error) {\n        if (error.response?.data?.message) {\n          ElMessage.error(error.response.data.message);\n        } else {\n          ElMessage.error('문의 등록에 실패했습니다.');\n        }\n      } finally {\n        loading.value = false;\n      }\n    };\n    const getInquiryTypeText = type => {\n      const types = {\n        general: '이용 문의',\n        bug: '오류 신고',\n        feature: '서비스 제안',\n        other: '기타'\n      };\n      return types[type] || type;\n    };\n    const getInquiryTypeClass = type => {\n      return `type-${type}`;\n    };\n    const getStatusText = status => {\n      const statuses = {\n        pending: '대기중',\n        in_progress: '처리중',\n        completed: '답변완료'\n      };\n      return statuses[status] || status;\n    };\n    const getStatusClass = status => {\n      return `status-${status}`;\n    };\n    const formatDate = date => {\n      return dayjs(date).format('YYYY.MM.DD HH:mm');\n    };\n    onMounted(() => {\n      // 사용자 이메일로 기본 설정\n      const user = store.state.auth.user;\n      if (user?.email) {\n        form.value.email = user.email;\n      }\n      loadMyInquiries();\n    });\n    return {\n      formRef,\n      loading,\n      form,\n      rules,\n      myInquiries,\n      submitInquiry,\n      getInquiryTypeText,\n      getInquiryTypeClass,\n      getStatusText,\n      getStatusClass,\n      formatDate\n    };\n  }\n};","map":{"version":3,"names":["ref","onMounted","ElMessage","useStore","api","dayjs","name","setup","store","formRef","loading","myInquiries","form","email","inquiryType","title","content","rules","required","message","trigger","type","min","max","loadMyInquiries","response","get","value","data","error","console","submitInquiry","validate","post","success","resetFields","getInquiryTypeText","types","general","bug","feature","other","getInquiryTypeClass","getStatusText","status","statuses","pending","in_progress","completed","getStatusClass","formatDate","date","format","user","state","auth"],"sources":["D:\\03.기타\\todolist\\frontend\\src\\views\\Inquiry.vue"],"sourcesContent":["<template>\r\n  <div class=\"inquiry\">\r\n    <div class=\"header\">\r\n      <h2>문의사항</h2>\r\n      <p>궁금한 점이나 개선사항을 알려주세요!</p>\r\n    </div>\r\n\r\n    <div class=\"form-container\">\r\n      <el-form \r\n        ref=\"formRef\" \r\n        :model=\"form\" \r\n        :rules=\"rules\" \r\n        label-width=\"120px\"\r\n        class=\"inquiry-form\"\r\n      >\r\n        <el-form-item label=\"답변 받을 이메일\" prop=\"email\">\r\n          <el-input \r\n            v-model=\"form.email\" \r\n            placeholder=\"답변을 받으실 이메일을 입력하세요\"\r\n            type=\"email\"\r\n          />\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"문의 유형\" prop=\"inquiryType\">\r\n          <el-select v-model=\"form.inquiryType\" placeholder=\"문의 유형을 선택하세요\">\r\n            <el-option label=\"이용 문의\" value=\"general\" />\r\n            <el-option label=\"오류 신고\" value=\"bug\" />\r\n            <el-option label=\"서비스 제안\" value=\"feature\" />\r\n            <el-option label=\"기타\" value=\"other\" />\r\n          </el-select>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"제목\" prop=\"title\">\r\n          <el-input \r\n            v-model=\"form.title\" \r\n            placeholder=\"문의 제목을 입력하세요\"\r\n          />\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"문의 내용\" prop=\"content\">\r\n          <el-input \r\n            v-model=\"form.content\" \r\n            type=\"textarea\" \r\n            :rows=\"6\"\r\n            placeholder=\"문의 내용을 자세히 입력해주세요\"\r\n          />\r\n        </el-form-item>\r\n\r\n        <el-form-item>\r\n          <el-button \r\n            type=\"primary\" \r\n            size=\"large\" \r\n            @click=\"submitInquiry\"\r\n            :loading=\"loading\"\r\n          >\r\n            문의하기\r\n          </el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </div>\r\n\r\n    <!-- 내 문의 내역 -->\r\n    <div class=\"my-inquiries\" v-if=\"myInquiries.length > 0\">\r\n      <h3>내 문의 내역</h3>\r\n      <div class=\"inquiries-list\">\r\n        <el-card \r\n          v-for=\"inquiry in myInquiries\" \r\n          :key=\"inquiry.inquiryId\"\r\n          class=\"inquiry-card\"\r\n        >\r\n          <div class=\"inquiry-header\">\r\n            <div class=\"inquiry-meta\">\r\n              <span class=\"inquiry-type\" :class=\"getInquiryTypeClass(inquiry.inquiryType)\">\r\n                {{ getInquiryTypeText(inquiry.inquiryType) }}\r\n              </span>\r\n              <span class=\"inquiry-date\">{{ formatDate(inquiry.createdAt) }}</span>\r\n            </div>\r\n            <span class=\"inquiry-status\" :class=\"getStatusClass(inquiry.status)\">\r\n              {{ getStatusText(inquiry.status) }}\r\n            </span>\r\n          </div>\r\n          \r\n          <h4 class=\"inquiry-title\">{{ inquiry.title }}</h4>\r\n          <p class=\"inquiry-content\">{{ inquiry.content }}</p>\r\n          \r\n          <div v-if=\"inquiry.adminResponse\" class=\"admin-response\">\r\n            <h5>답변</h5>\r\n            <p>{{ inquiry.adminResponse }}</p>\r\n          </div>\r\n        </el-card>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, onMounted } from 'vue'\r\nimport { ElMessage } from 'element-plus'\r\nimport { useStore } from 'vuex'\r\nimport api from '@/api'\r\nimport dayjs from 'dayjs'\r\n\r\nexport default {\r\n  name: 'Inquiry',\r\n  setup() {\r\n    const store = useStore()\r\n    const formRef = ref()\r\n    const loading = ref(false)\r\n    const myInquiries = ref([])\r\n    \r\n    const form = ref({\r\n      email: '',\r\n      inquiryType: '',\r\n      title: '',\r\n      content: ''\r\n    })\r\n\r\n    const rules = {\r\n      email: [\r\n        { required: true, message: '이메일을 입력해주세요', trigger: 'blur' },\r\n        { type: 'email', message: '올바른 이메일 형식을 입력해주세요', trigger: 'blur' }\r\n      ],\r\n      inquiryType: [\r\n        { required: true, message: '문의 유형을 선택해주세요', trigger: 'change' }\r\n      ],\r\n      title: [\r\n        { required: true, message: '제목을 입력해주세요', trigger: 'blur' },\r\n        { min: 2, max: 100, message: '제목은 2-100자 사이로 입력해주세요', trigger: 'blur' }\r\n      ],\r\n      content: [\r\n        { required: true, message: '문의 내용을 입력해주세요', trigger: 'blur' },\r\n        { min: 10, max: 2000, message: '문의 내용은 10-2000자 사이로 입력해주세요', trigger: 'blur' }\r\n      ]\r\n    }\r\n\r\n    const loadMyInquiries = async () => {\r\n      try {\r\n        const response = await api.get('/inquiries/my')\r\n        myInquiries.value = response.data\r\n      } catch (error) {\r\n        console.error('문의 내역 로드 실패:', error)\r\n      }\r\n    }\r\n\r\n    const submitInquiry = async () => {\r\n      if (!formRef.value) return\r\n      \r\n      try {\r\n        await formRef.value.validate()\r\n        loading.value = true\r\n        \r\n        await api.post('/inquiries', form.value)\r\n        \r\n        ElMessage.success('문의가 성공적으로 등록되었습니다!')\r\n        \r\n        // 폼 초기화\r\n        form.value = {\r\n          email: '',\r\n          inquiryType: '',\r\n          title: '',\r\n          content: ''\r\n        }\r\n        formRef.value.resetFields()\r\n        \r\n        // 문의 내역 새로고침\r\n        await loadMyInquiries()\r\n      } catch (error) {\r\n        if (error.response?.data?.message) {\r\n          ElMessage.error(error.response.data.message)\r\n        } else {\r\n          ElMessage.error('문의 등록에 실패했습니다.')\r\n        }\r\n      } finally {\r\n        loading.value = false\r\n      }\r\n    }\r\n\r\n    const getInquiryTypeText = (type) => {\r\n      const types = {\r\n        general: '이용 문의',\r\n        bug: '오류 신고',\r\n        feature: '서비스 제안',\r\n        other: '기타'\r\n      }\r\n      return types[type] || type\r\n    }\r\n\r\n    const getInquiryTypeClass = (type) => {\r\n      return `type-${type}`\r\n    }\r\n\r\n    const getStatusText = (status) => {\r\n      const statuses = {\r\n        pending: '대기중',\r\n        in_progress: '처리중',\r\n        completed: '답변완료'\r\n      }\r\n      return statuses[status] || status\r\n    }\r\n\r\n    const getStatusClass = (status) => {\r\n      return `status-${status}`\r\n    }\r\n\r\n    const formatDate = (date) => {\r\n      return dayjs(date).format('YYYY.MM.DD HH:mm')\r\n    }\r\n\r\n    onMounted(() => {\r\n      // 사용자 이메일로 기본 설정\r\n      const user = store.state.auth.user\r\n      if (user?.email) {\r\n        form.value.email = user.email\r\n      }\r\n      \r\n      loadMyInquiries()\r\n    })\r\n\r\n    return {\r\n      formRef,\r\n      loading,\r\n      form,\r\n      rules,\r\n      myInquiries,\r\n      submitInquiry,\r\n      getInquiryTypeText,\r\n      getInquiryTypeClass,\r\n      getStatusText,\r\n      getStatusClass,\r\n      formatDate\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.inquiry {\r\n  max-width: 800px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n}\r\n\r\n.header {\r\n  text-align: center;\r\n  margin-bottom: 30px;\r\n}\r\n\r\n.header h2 {\r\n  font-size: 2rem;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.header p {\r\n  color: var(--el-text-color-regular);\r\n}\r\n\r\n.form-container {\r\n  background: var(--el-bg-color);\r\n  padding: 30px;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\r\n  margin-bottom: 40px;\r\n}\r\n\r\n.inquiry-form {\r\n  max-width: 600px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.my-inquiries {\r\n  margin-top: 40px;\r\n}\r\n\r\n.my-inquiries h3 {\r\n  margin-bottom: 20px;\r\n  font-size: 1.3rem;\r\n}\r\n\r\n.inquiries-list {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 15px;\r\n}\r\n\r\n.inquiry-card {\r\n  border-radius: 8px;\r\n}\r\n\r\n.inquiry-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.inquiry-meta {\r\n  display: flex;\r\n  gap: 15px;\r\n  align-items: center;\r\n}\r\n\r\n.inquiry-type {\r\n  padding: 4px 8px;\r\n  border-radius: 4px;\r\n  font-size: 0.8rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.type-general {\r\n  background: var(--el-color-primary-light-9);\r\n  color: var(--el-color-primary);\r\n}\r\n\r\n.type-bug {\r\n  background: var(--el-color-danger-light-9);\r\n  color: var(--el-color-danger);\r\n}\r\n\r\n.type-feature {\r\n  background: var(--el-color-success-light-9);\r\n  color: var(--el-color-success);\r\n}\r\n\r\n.type-other {\r\n  background: var(--el-color-info-light-9);\r\n  color: var(--el-color-info);\r\n}\r\n\r\n.inquiry-date {\r\n  font-size: 0.8rem;\r\n  color: var(--el-text-color-secondary);\r\n}\r\n\r\n.inquiry-status {\r\n  padding: 4px 8px;\r\n  border-radius: 4px;\r\n  font-size: 0.8rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.status-pending {\r\n  background: var(--el-color-warning-light-9);\r\n  color: var(--el-color-warning);\r\n}\r\n\r\n.status-in_progress {\r\n  background: var(--el-color-primary-light-9);\r\n  color: var(--el-color-primary);\r\n}\r\n\r\n.status-completed {\r\n  background: var(--el-color-success-light-9);\r\n  color: var(--el-color-success);\r\n}\r\n\r\n.inquiry-title {\r\n  margin: 0 0 10px 0;\r\n  font-size: 1.1rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.inquiry-content {\r\n  margin: 0 0 15px 0;\r\n  color: var(--el-text-color-regular);\r\n  line-height: 1.6;\r\n}\r\n\r\n.admin-response {\r\n  margin-top: 15px;\r\n  padding: 15px;\r\n  background: var(--el-color-success-light-9);\r\n  border-radius: 4px;\r\n  border-left: 4px solid var(--el-color-success);\r\n}\r\n\r\n.admin-response h5 {\r\n  margin: 0 0 10px 0;\r\n  color: var(--el-color-success);\r\n  font-weight: 500;\r\n}\r\n\r\n.admin-response p {\r\n  margin: 0;\r\n  color: var(--el-text-color-regular);\r\n  line-height: 1.6;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .inquiry {\r\n    padding: 15px;\r\n  }\r\n  \r\n  .form-container {\r\n    padding: 20px;\r\n  }\r\n  \r\n  .inquiry-header {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    gap: 10px;\r\n  }\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}