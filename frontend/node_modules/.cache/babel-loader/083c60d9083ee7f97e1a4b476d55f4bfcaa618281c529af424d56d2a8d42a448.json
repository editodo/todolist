{"ast":null,"code":"import api from '@/api';\nconst state = {\n  user: null,\n  token: localStorage.getItem('token') || null,\n  isAuthenticated: false\n};\nconst mutations = {\n  SET_USER(state, user) {\n    state.user = user;\n    state.isAuthenticated = !!user;\n  },\n  SET_TOKEN(state, token) {\n    state.token = token;\n    if (token) {\n      localStorage.setItem('token', token);\n    } else {\n      localStorage.removeItem('token');\n    }\n  },\n  LOGOUT(state) {\n    state.user = null;\n    state.token = null;\n    state.isAuthenticated = false;\n    localStorage.removeItem('token');\n  }\n};\nconst actions = {\n  async login({\n    commit\n  }, credentials) {\n    try {\n      const response = await api.post('/auth/login', credentials);\n      const {\n        accessToken,\n        userInfo\n      } = response.data;\n      commit('SET_TOKEN', accessToken);\n      commit('SET_USER', userInfo);\n      return response.data;\n    } catch (error) {\n      throw error;\n    }\n  },\n  async signUp({\n    commit\n  }, userData) {\n    try {\n      const response = await api.post('/auth/signup', userData);\n      return response.data;\n    } catch (error) {\n      throw error;\n    }\n  },\n  async demoLogin({\n    commit\n  }) {\n    try {\n      const response = await api.post('/auth/demo-login');\n      const {\n        accessToken,\n        userInfo\n      } = response.data;\n      commit('SET_TOKEN', accessToken);\n      commit('SET_USER', userInfo);\n      return response.data;\n    } catch (error) {\n      throw error;\n    }\n  },\n  async getCurrentUser({\n    commit\n  }) {\n    try {\n      const response = await api.get('/auth/me');\n      commit('SET_USER', response.data);\n      return response.data;\n    } catch (error) {\n      commit('LOGOUT');\n      throw error;\n    }\n  },\n  logout({\n    commit\n  }) {\n    commit('LOGOUT');\n  },\n  async updateUser({\n    commit\n  }, userData) {\n    try {\n      const response = await api.put('/users/profile', userData);\n      commit('SET_USER', response.data);\n      return response.data;\n    } catch (error) {\n      throw error;\n    }\n  }\n};\nconst getters = {\n  isAuthenticated: state => state.isAuthenticated,\n  currentUser: state => state.user,\n  token: state => state.token\n};\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions,\n  getters\n};","map":{"version":3,"names":["api","state","user","token","localStorage","getItem","isAuthenticated","mutations","SET_USER","SET_TOKEN","setItem","removeItem","LOGOUT","actions","login","commit","credentials","response","post","accessToken","userInfo","data","error","signUp","userData","demoLogin","getCurrentUser","get","logout","updateUser","put","getters","currentUser","namespaced"],"sources":["D:/03.기타/todolist/frontend/src/store/modules/auth.js"],"sourcesContent":["import api from '@/api'\r\n\r\nconst state = {\r\n  user: null,\r\n  token: localStorage.getItem('token') || null,\r\n  isAuthenticated: false\r\n}\r\n\r\nconst mutations = {\r\n  SET_USER(state, user) {\r\n    state.user = user\r\n    state.isAuthenticated = !!user\r\n  },\r\n  SET_TOKEN(state, token) {\r\n    state.token = token\r\n    if (token) {\r\n      localStorage.setItem('token', token)\r\n    } else {\r\n      localStorage.removeItem('token')\r\n    }\r\n  },\r\n  LOGOUT(state) {\r\n    state.user = null\r\n    state.token = null\r\n    state.isAuthenticated = false\r\n    localStorage.removeItem('token')\r\n  }\r\n}\r\n\r\nconst actions = {\r\n  async login({ commit }, credentials) {\r\n    try {\r\n      const response = await api.post('/auth/login', credentials)\r\n      const { accessToken, userInfo } = response.data\r\n      \r\n      commit('SET_TOKEN', accessToken)\r\n      commit('SET_USER', userInfo)\r\n      \r\n      return response.data\r\n    } catch (error) {\r\n      throw error\r\n    }\r\n  },\r\n  \r\n  async signUp({ commit }, userData) {\r\n    try {\r\n      const response = await api.post('/auth/signup', userData)\r\n      return response.data\r\n    } catch (error) {\r\n      throw error\r\n    }\r\n  },\r\n  \r\n  async demoLogin({ commit }) {\r\n    try {\r\n      const response = await api.post('/auth/demo-login')\r\n      const { accessToken, userInfo } = response.data\r\n      \r\n      commit('SET_TOKEN', accessToken)\r\n      commit('SET_USER', userInfo)\r\n      \r\n      return response.data\r\n    } catch (error) {\r\n      throw error\r\n    }\r\n  },\r\n  \r\n  async getCurrentUser({ commit }) {\r\n    try {\r\n      const response = await api.get('/auth/me')\r\n      commit('SET_USER', response.data)\r\n      return response.data\r\n    } catch (error) {\r\n      commit('LOGOUT')\r\n      throw error\r\n    }\r\n  },\r\n  \r\n  logout({ commit }) {\r\n    commit('LOGOUT')\r\n  },\r\n  \r\n  async updateUser({ commit }, userData) {\r\n    try {\r\n      const response = await api.put('/users/profile', userData)\r\n      commit('SET_USER', response.data)\r\n      return response.data\r\n    } catch (error) {\r\n      throw error\r\n    }\r\n  }\r\n}\r\n\r\nconst getters = {\r\n  isAuthenticated: state => state.isAuthenticated,\r\n  currentUser: state => state.user,\r\n  token: state => state.token\r\n}\r\n\r\nexport default {\r\n  namespaced: true,\r\n  state,\r\n  mutations,\r\n  actions,\r\n  getters\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}