{"ast":null,"code":"import { computed, onMounted } from 'vue';\nimport { useStore } from 'vuex';\nimport { useRouter, useRoute } from 'vue-router';\nimport { ElMessage, ElMessageBox } from 'element-plus';\nimport { ArrowLeft, Edit, Delete, Bell, Paperclip } from '@element-plus/icons-vue';\nimport dayjs from 'dayjs';\nexport default {\n  name: 'NoticeDetail',\n  components: {\n    ArrowLeft,\n    Edit,\n    Delete,\n    Bell,\n    Paperclip\n  },\n  setup() {\n    const store = useStore();\n    const router = useRouter();\n    const route = useRoute();\n    const currentNotice = computed(() => store.getters['notice/currentNotice']);\n    const loading = computed(() => store.getters['notice/loading']);\n    const error = computed(() => store.getters['notice/error']);\n    const user = computed(() => store.state.auth.user);\n\n    // 편집 권한 확인\n    const canEdit = computed(() => {\n      if (!currentNotice.value || !user.value) return false;\n      return user.value.isAdmin || currentNotice.value.user.userId === user.value.userId;\n    });\n    const loadNoticeDetail = async () => {\n      try {\n        await store.dispatch('notice/fetchNoticeDetail', route.params.id);\n      } catch (error) {\n        ElMessage.error('공지사항을 불러오는데 실패했습니다.');\n      }\n    };\n    const goBack = () => {\n      router.back();\n    };\n    const goToEdit = () => {\n      router.push(`/notices/edit/${route.params.id}`);\n    };\n    const deleteNotice = async () => {\n      try {\n        await ElMessageBox.confirm('정말 삭제하시겠습니까?', '확인', {\n          confirmButtonText: '삭제',\n          cancelButtonText: '취소',\n          type: 'warning'\n        });\n        await store.dispatch('notice/deleteNotice', route.params.id);\n        ElMessage.success('공지사항이 삭제되었습니다.');\n        router.push('/notices');\n      } catch (error) {\n        if (error !== 'cancel') {\n          ElMessage.error('공지사항 삭제에 실패했습니다.');\n        }\n      }\n    };\n    const downloadFile = attachment => {\n      const link = document.createElement('a');\n      link.href = attachment.filePath;\n      link.download = attachment.originalFilename;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n    };\n    const formatDate = date => {\n      return dayjs(date).format('YYYY.MM.DD HH:mm');\n    };\n    const formatFileSize = bytes => {\n      if (bytes === 0) return '0 Bytes';\n      const k = 1024;\n      const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n      const i = Math.floor(Math.log(bytes) / Math.log(k));\n      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n    };\n    onMounted(() => {\n      loadNoticeDetail();\n    });\n    return {\n      currentNotice,\n      loading,\n      error,\n      canEdit,\n      goBack,\n      goToEdit,\n      deleteNotice,\n      downloadFile,\n      formatDate,\n      formatFileSize\n    };\n  }\n};","map":{"version":3,"names":["computed","onMounted","useStore","useRouter","useRoute","ElMessage","ElMessageBox","ArrowLeft","Edit","Delete","Bell","Paperclip","dayjs","name","components","setup","store","router","route","currentNotice","getters","loading","error","user","state","auth","canEdit","value","isAdmin","userId","loadNoticeDetail","dispatch","params","id","goBack","back","goToEdit","push","deleteNotice","confirm","confirmButtonText","cancelButtonText","type","success","downloadFile","attachment","link","document","createElement","href","filePath","download","originalFilename","body","appendChild","click","removeChild","formatDate","date","format","formatFileSize","bytes","k","sizes","i","Math","floor","log","parseFloat","pow","toFixed"],"sources":["D:\\03.기타\\todolist\\frontend\\src\\views\\NoticeDetail.vue"],"sourcesContent":["<template>\r\n  <div class=\"notice-detail\">\r\n    <div class=\"header\">\r\n      <el-button @click=\"goBack\" :icon=\"ArrowLeft\" text>\r\n        뒤로가기\r\n      </el-button>\r\n      <div class=\"actions\" v-if=\"canEdit\">\r\n        <el-button @click=\"goToEdit\" :icon=\"Edit\" text>\r\n          수정\r\n        </el-button>\r\n        <el-button @click=\"deleteNotice\" :icon=\"Delete\" text type=\"danger\">\r\n          삭제\r\n        </el-button>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"detail-container\" v-if=\"currentNotice\">\r\n      <!-- 공지사항 헤더 -->\r\n      <div class=\"notice-header\">\r\n        <div class=\"notice-badge\" v-if=\"currentNotice.isNotice\">\r\n          <el-icon><Bell /></el-icon>\r\n          공지사항\r\n        </div>\r\n        <h1 class=\"notice-title\">{{ currentNotice.title }}</h1>\r\n        <div class=\"notice-meta\">\r\n          <span class=\"author\">{{ currentNotice.user.nickname || currentNotice.user.username }}</span>\r\n          <span class=\"date\">{{ formatDate(currentNotice.createdAt) }}</span>\r\n          <span class=\"views\">조회 {{ currentNotice.viewCount }}</span>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 공지사항 내용 -->\r\n      <div class=\"notice-content\">\r\n        <div class=\"content-html\" v-html=\"currentNotice.content\"></div>\r\n      </div>\r\n\r\n      <!-- 첨부파일 -->\r\n      <div class=\"attachments\" v-if=\"currentNotice.attachments && currentNotice.attachments.length > 0\">\r\n        <h3>첨부파일</h3>\r\n        <div class=\"attachment-list\">\r\n          <div \r\n            v-for=\"attachment in currentNotice.attachments\" \r\n            :key=\"attachment.attachmentId\"\r\n            class=\"attachment-item\"\r\n            @click=\"downloadFile(attachment)\"\r\n          >\r\n            <el-icon><Paperclip /></el-icon>\r\n            <span class=\"filename\">{{ attachment.originalFilename }}</span>\r\n            <span class=\"filesize\">{{ formatFileSize(attachment.fileSize) }}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 로딩 상태 -->\r\n    <div v-if=\"loading\" class=\"loading\">\r\n      <el-skeleton :rows=\"10\" animated />\r\n    </div>\r\n\r\n    <!-- 에러 상태 -->\r\n    <div v-if=\"error\" class=\"error\">\r\n      <el-empty description=\"공지사항을 불러올 수 없습니다.\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { computed, onMounted } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport { useRouter, useRoute } from 'vue-router'\r\nimport { ElMessage, ElMessageBox } from 'element-plus'\r\nimport { ArrowLeft, Edit, Delete, Bell, Paperclip } from '@element-plus/icons-vue'\r\nimport dayjs from 'dayjs'\r\n\r\nexport default {\r\n  name: 'NoticeDetail',\r\n  components: {\r\n    ArrowLeft,\r\n    Edit,\r\n    Delete,\r\n    Bell,\r\n    Paperclip\r\n  },\r\n  setup() {\r\n    const store = useStore()\r\n    const router = useRouter()\r\n    const route = useRoute()\r\n\r\n    const currentNotice = computed(() => store.getters['notice/currentNotice'])\r\n    const loading = computed(() => store.getters['notice/loading'])\r\n    const error = computed(() => store.getters['notice/error'])\r\n    const user = computed(() => store.state.auth.user)\r\n\r\n    // 편집 권한 확인\r\n    const canEdit = computed(() => {\r\n      if (!currentNotice.value || !user.value) return false\r\n      return user.value.isAdmin || currentNotice.value.user.userId === user.value.userId\r\n    })\r\n\r\n    const loadNoticeDetail = async () => {\r\n      try {\r\n        await store.dispatch('notice/fetchNoticeDetail', route.params.id)\r\n      } catch (error) {\r\n        ElMessage.error('공지사항을 불러오는데 실패했습니다.')\r\n      }\r\n    }\r\n\r\n    const goBack = () => {\r\n      router.back()\r\n    }\r\n\r\n    const goToEdit = () => {\r\n      router.push(`/notices/edit/${route.params.id}`)\r\n    }\r\n\r\n    const deleteNotice = async () => {\r\n      try {\r\n        await ElMessageBox.confirm('정말 삭제하시겠습니까?', '확인', {\r\n          confirmButtonText: '삭제',\r\n          cancelButtonText: '취소',\r\n          type: 'warning'\r\n        })\r\n        \r\n        await store.dispatch('notice/deleteNotice', route.params.id)\r\n        ElMessage.success('공지사항이 삭제되었습니다.')\r\n        router.push('/notices')\r\n      } catch (error) {\r\n        if (error !== 'cancel') {\r\n          ElMessage.error('공지사항 삭제에 실패했습니다.')\r\n        }\r\n      }\r\n    }\r\n\r\n    const downloadFile = (attachment) => {\r\n      const link = document.createElement('a')\r\n      link.href = attachment.filePath\r\n      link.download = attachment.originalFilename\r\n      document.body.appendChild(link)\r\n      link.click()\r\n      document.body.removeChild(link)\r\n    }\r\n\r\n    const formatDate = (date) => {\r\n      return dayjs(date).format('YYYY.MM.DD HH:mm')\r\n    }\r\n\r\n    const formatFileSize = (bytes) => {\r\n      if (bytes === 0) return '0 Bytes'\r\n      const k = 1024\r\n      const sizes = ['Bytes', 'KB', 'MB', 'GB']\r\n      const i = Math.floor(Math.log(bytes) / Math.log(k))\r\n      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i]\r\n    }\r\n\r\n    onMounted(() => {\r\n      loadNoticeDetail()\r\n    })\r\n\r\n    return {\r\n      currentNotice,\r\n      loading,\r\n      error,\r\n      canEdit,\r\n      goBack,\r\n      goToEdit,\r\n      deleteNotice,\r\n      downloadFile,\r\n      formatDate,\r\n      formatFileSize\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.notice-detail {\r\n  max-width: 800px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n}\r\n\r\n.header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.actions {\r\n  display: flex;\r\n  gap: 10px;\r\n}\r\n\r\n.detail-container {\r\n  background: var(--el-bg-color);\r\n  border-radius: 8px;\r\n  padding: 30px;\r\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.notice-header {\r\n  margin-bottom: 30px;\r\n  padding-bottom: 20px;\r\n  border-bottom: 1px solid var(--el-border-color-lighter);\r\n}\r\n\r\n.notice-badge {\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 5px;\r\n  background: var(--el-color-danger);\r\n  color: white;\r\n  padding: 4px 12px;\r\n  border-radius: 16px;\r\n  font-size: 0.9rem;\r\n  font-weight: 500;\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.notice-title {\r\n  margin: 0 0 15px 0;\r\n  font-size: 1.8rem;\r\n  font-weight: bold;\r\n  color: var(--el-text-color-primary);\r\n  line-height: 1.4;\r\n}\r\n\r\n.notice-meta {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 20px;\r\n  font-size: 0.9rem;\r\n  color: var(--el-text-color-secondary);\r\n}\r\n\r\n.author {\r\n  font-weight: 500;\r\n}\r\n\r\n.notice-content {\r\n  margin-bottom: 30px;\r\n}\r\n\r\n.content-html {\r\n  line-height: 1.8;\r\n  color: var(--el-text-color-primary);\r\n}\r\n\r\n.content-html :deep(h1),\r\n.content-html :deep(h2),\r\n.content-html :deep(h3),\r\n.content-html :deep(h4),\r\n.content-html :deep(h5),\r\n.content-html :deep(h6) {\r\n  margin-top: 1.5em;\r\n  margin-bottom: 0.5em;\r\n  font-weight: 600;\r\n}\r\n\r\n.content-html :deep(p) {\r\n  margin-bottom: 1em;\r\n}\r\n\r\n.content-html :deep(ul),\r\n.content-html :deep(ol) {\r\n  margin-bottom: 1em;\r\n  padding-left: 2em;\r\n}\r\n\r\n.content-html :deep(blockquote) {\r\n  border-left: 4px solid var(--el-color-primary);\r\n  padding-left: 1em;\r\n  margin: 1em 0;\r\n  color: var(--el-text-color-secondary);\r\n}\r\n\r\n.content-html :deep(code) {\r\n  background: var(--el-fill-color-light);\r\n  padding: 2px 6px;\r\n  border-radius: 4px;\r\n  font-family: 'Courier New', monospace;\r\n}\r\n\r\n.content-html :deep(pre) {\r\n  background: var(--el-fill-color-light);\r\n  padding: 1em;\r\n  border-radius: 6px;\r\n  overflow-x: auto;\r\n}\r\n\r\n.attachments {\r\n  border-top: 1px solid var(--el-border-color-lighter);\r\n  padding-top: 20px;\r\n}\r\n\r\n.attachments h3 {\r\n  margin: 0 0 15px 0;\r\n  font-size: 1.1rem;\r\n  font-weight: 600;\r\n  color: var(--el-text-color-primary);\r\n}\r\n\r\n.attachment-list {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 10px;\r\n}\r\n\r\n.attachment-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n  padding: 12px;\r\n  border: 1px solid var(--el-border-color-lighter);\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.attachment-item:hover {\r\n  border-color: var(--el-color-primary);\r\n  background: var(--el-color-primary-light-9);\r\n}\r\n\r\n.filename {\r\n  flex: 1;\r\n  font-weight: 500;\r\n  color: var(--el-text-color-primary);\r\n}\r\n\r\n.filesize {\r\n  font-size: 0.9rem;\r\n  color: var(--el-text-color-secondary);\r\n}\r\n\r\n.loading {\r\n  padding: 20px;\r\n}\r\n\r\n.error {\r\n  padding: 40px 20px;\r\n  text-align: center;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .notice-detail {\r\n    padding: 15px;\r\n  }\r\n  \r\n  .detail-container {\r\n    padding: 20px;\r\n  }\r\n  \r\n  .notice-title {\r\n    font-size: 1.5rem;\r\n  }\r\n  \r\n  .notice-meta {\r\n    flex-wrap: wrap;\r\n    gap: 15px;\r\n  }\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}