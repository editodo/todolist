{"ast":null,"code":"import api from '@/api';\nconst state = {\n  todos: [],\n  stats: {\n    totalTodos: 0,\n    completedTodos: 0,\n    pendingTodos: 0\n  },\n  loading: false,\n  error: null\n};\nconst mutations = {\n  SET_TODOS(state, todos) {\n    state.todos = todos;\n  },\n  SET_STATS(state, stats) {\n    state.stats = stats;\n  },\n  ADD_TODO(state, todo) {\n    state.todos.push(todo);\n  },\n  UPDATE_TODO(state, updatedTodo) {\n    console.log('Updating todo in store:', updatedTodo);\n    const index = state.todos.findIndex(todo => todo.todoId === updatedTodo.todoId);\n    console.log('Found todo at index:', index);\n    if (index !== -1) {\n      state.todos.splice(index, 1, updatedTodo);\n      console.log('Todo updated successfully');\n    } else {\n      console.warn('Todo not found for update:', updatedTodo.todoId);\n    }\n  },\n  DELETE_TODO(state, todoId) {\n    state.todos = state.todos.filter(todo => todo.todoId !== todoId);\n  },\n  SET_LOADING(state, loading) {\n    state.loading = loading;\n  },\n  SET_ERROR(state, error) {\n    state.error = error;\n  }\n};\nconst actions = {\n  async fetchTodos({\n    commit\n  }, date) {\n    commit('SET_LOADING', true);\n    try {\n      const response = await api.get(`/todos?date=${date}`);\n      commit('SET_TODOS', response.data);\n    } catch (error) {\n      commit('SET_ERROR', error.message);\n    } finally {\n      commit('SET_LOADING', false);\n    }\n  },\n  async fetchStats({\n    commit\n  }) {\n    try {\n      const response = await api.get('/todos/stats');\n      commit('SET_STATS', response.data);\n    } catch (error) {\n      commit('SET_ERROR', error.message);\n    }\n  },\n  async addTodo({\n    commit\n  }, todo) {\n    commit('SET_LOADING', true);\n    try {\n      const response = await api.post('/todos', todo);\n      commit('ADD_TODO', response.data);\n      return response.data;\n    } catch (error) {\n      commit('SET_ERROR', error.message);\n      throw error;\n    } finally {\n      commit('SET_LOADING', false);\n    }\n  },\n  async updateTodo({\n    commit\n  }, {\n    todoId,\n    todo\n  }) {\n    commit('SET_LOADING', true);\n    try {\n      const response = await api.put(`/todos/${todoId}`, todo);\n      commit('UPDATE_TODO', response.data);\n      return response.data;\n    } catch (error) {\n      commit('SET_ERROR', error.message);\n      throw error;\n    } finally {\n      commit('SET_LOADING', false);\n    }\n  },\n  async deleteTodo({\n    commit\n  }, todoId) {\n    commit('SET_LOADING', true);\n    try {\n      await api.delete(`/todos/${todoId}`);\n      commit('DELETE_TODO', todoId);\n    } catch (error) {\n      commit('SET_ERROR', error.message);\n      throw error;\n    } finally {\n      commit('SET_LOADING', false);\n    }\n  },\n  async toggleTodo({\n    commit\n  }, {\n    todoId,\n    completed\n  }) {\n    console.log('Store toggleTodo - todoId:', todoId, 'completed:', completed);\n    commit('SET_LOADING', true);\n    try {\n      const payload = {\n        isCompleted: completed\n      };\n      console.log('Sending payload:', payload);\n      const response = await api.patch(`/todos/${todoId}/complete`, payload);\n      console.log('Toggle response:', response.data);\n\n      // 응답 데이터가 올바른지 확인\n      if (response.data && response.data.todoId === todoId) {\n        commit('UPDATE_TODO', response.data);\n        console.log('Todo updated in store successfully');\n      } else {\n        console.error('Invalid response data:', response.data);\n        throw new Error('Invalid response from server');\n      }\n      return response.data;\n    } catch (error) {\n      console.error('Store toggleTodo error:', error);\n      commit('SET_ERROR', error.message);\n      throw error;\n    } finally {\n      commit('SET_LOADING', false);\n    }\n  }\n};\nconst getters = {\n  todos: state => state.todos,\n  stats: state => state.stats,\n  loading: state => state.loading,\n  error: state => state.error,\n  completedTodos: state => state.todos.filter(todo => todo.isCompleted),\n  pendingTodos: state => state.todos.filter(todo => !todo.isCompleted)\n};\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions,\n  getters\n};","map":{"version":3,"names":["api","state","todos","stats","totalTodos","completedTodos","pendingTodos","loading","error","mutations","SET_TODOS","SET_STATS","ADD_TODO","todo","push","UPDATE_TODO","updatedTodo","console","log","index","findIndex","todoId","splice","warn","DELETE_TODO","filter","SET_LOADING","SET_ERROR","actions","fetchTodos","commit","date","response","get","data","message","fetchStats","addTodo","post","updateTodo","put","deleteTodo","delete","toggleTodo","completed","payload","isCompleted","patch","Error","getters","namespaced"],"sources":["D:/03.기타/todolist/frontend/src/store/modules/todo.js"],"sourcesContent":["import api from '@/api'\r\n\r\nconst state = {\r\n  todos: [],\r\n  stats: {\r\n    totalTodos: 0,\r\n    completedTodos: 0,\r\n    pendingTodos: 0\r\n  },\r\n  loading: false,\r\n  error: null\r\n}\r\n\r\nconst mutations = {\r\n  SET_TODOS(state, todos) {\r\n    state.todos = todos\r\n  },\r\n  SET_STATS(state, stats) {\r\n    state.stats = stats\r\n  },\r\n  ADD_TODO(state, todo) {\r\n    state.todos.push(todo)\r\n  },\r\n  UPDATE_TODO(state, updatedTodo) {\r\n    console.log('Updating todo in store:', updatedTodo)\r\n    const index = state.todos.findIndex(todo => todo.todoId === updatedTodo.todoId)\r\n    console.log('Found todo at index:', index)\r\n    if (index !== -1) {\r\n      state.todos.splice(index, 1, updatedTodo)\r\n      console.log('Todo updated successfully')\r\n    } else {\r\n      console.warn('Todo not found for update:', updatedTodo.todoId)\r\n    }\r\n  },\r\n  DELETE_TODO(state, todoId) {\r\n    state.todos = state.todos.filter(todo => todo.todoId !== todoId)\r\n  },\r\n  SET_LOADING(state, loading) {\r\n    state.loading = loading\r\n  },\r\n  SET_ERROR(state, error) {\r\n    state.error = error\r\n  }\r\n}\r\n\r\nconst actions = {\r\n  async fetchTodos({ commit }, date) {\r\n    commit('SET_LOADING', true)\r\n    try {\r\n      const response = await api.get(`/todos?date=${date}`)\r\n      commit('SET_TODOS', response.data)\r\n    } catch (error) {\r\n      commit('SET_ERROR', error.message)\r\n    } finally {\r\n      commit('SET_LOADING', false)\r\n    }\r\n  },\r\n\r\n  async fetchStats({ commit }) {\r\n    try {\r\n      const response = await api.get('/todos/stats')\r\n      commit('SET_STATS', response.data)\r\n    } catch (error) {\r\n      commit('SET_ERROR', error.message)\r\n    }\r\n  },\r\n\r\n  async addTodo({ commit }, todo) {\r\n    commit('SET_LOADING', true)\r\n    try {\r\n      const response = await api.post('/todos', todo)\r\n      commit('ADD_TODO', response.data)\r\n      return response.data\r\n    } catch (error) {\r\n      commit('SET_ERROR', error.message)\r\n      throw error\r\n    } finally {\r\n      commit('SET_LOADING', false)\r\n    }\r\n  },\r\n\r\n  async updateTodo({ commit }, { todoId, todo }) {\r\n    commit('SET_LOADING', true)\r\n    try {\r\n      const response = await api.put(`/todos/${todoId}`, todo)\r\n      commit('UPDATE_TODO', response.data)\r\n      return response.data\r\n    } catch (error) {\r\n      commit('SET_ERROR', error.message)\r\n      throw error\r\n    } finally {\r\n      commit('SET_LOADING', false)\r\n    }\r\n  },\r\n\r\n  async deleteTodo({ commit }, todoId) {\r\n    commit('SET_LOADING', true)\r\n    try {\r\n      await api.delete(`/todos/${todoId}`)\r\n      commit('DELETE_TODO', todoId)\r\n    } catch (error) {\r\n      commit('SET_ERROR', error.message)\r\n      throw error\r\n    } finally {\r\n      commit('SET_LOADING', false)\r\n    }\r\n  },\r\n\r\n  async toggleTodo({ commit }, { todoId, completed }) {\r\n    console.log('Store toggleTodo - todoId:', todoId, 'completed:', completed)\r\n    commit('SET_LOADING', true)\r\n    try {\r\n      const payload = { isCompleted: completed }\r\n      console.log('Sending payload:', payload)\r\n      const response = await api.patch(`/todos/${todoId}/complete`, payload)\r\n      console.log('Toggle response:', response.data)\r\n      \r\n      // 응답 데이터가 올바른지 확인\r\n      if (response.data && response.data.todoId === todoId) {\r\n        commit('UPDATE_TODO', response.data)\r\n        console.log('Todo updated in store successfully')\r\n      } else {\r\n        console.error('Invalid response data:', response.data)\r\n        throw new Error('Invalid response from server')\r\n      }\r\n      \r\n      return response.data\r\n    } catch (error) {\r\n      console.error('Store toggleTodo error:', error)\r\n      commit('SET_ERROR', error.message)\r\n      throw error\r\n    } finally {\r\n      commit('SET_LOADING', false)\r\n    }\r\n  }\r\n}\r\n\r\nconst getters = {\r\n  todos: state => state.todos,\r\n  stats: state => state.stats,\r\n  loading: state => state.loading,\r\n  error: state => state.error,\r\n  completedTodos: state => state.todos.filter(todo => todo.isCompleted),\r\n  pendingTodos: state => state.todos.filter(todo => !todo.isCompleted)\r\n}\r\n\r\nexport default {\r\n  namespaced: true,\r\n  state,\r\n  mutations,\r\n  actions,\r\n  getters\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}